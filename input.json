{
  "criterias": [
    {"lastName": "Smith"},
    {"productName": "Минеральная вода", "minTimes": 5},
    {"minExpenses": 112, "maxExpenses": 4000},
    {"badCustomers": 3}
  ]
}


{"criteria":{"lastName":"Smith"},"results":[{"lastName":"Smith","firstName":"Alice"},{"lastName":"Smith","firstName":"Crage"}]}

{  "criteria": {"lastName": "Иванов"}, "results": [{"lastName": "Иванов", "firstName": "Антон"}, {"lastName": "Иванов", "firstName": "Николай"}]}


SELECT customer_id, count(product_id) FROM public.purchase where product_id = 3 group by customer_id HAVING count(product_id) > 2;

SELECT customer_id, count(product_id) FROM public.purchase group by customer_id ORDER BY count(product_id) LIMIT 3 ;

SELECT  public.purchase.customer_id sum(public.product.price) FROM public.purchase  inner join public.product
on public.purchase.product_id = public.product.id group by customer_id;